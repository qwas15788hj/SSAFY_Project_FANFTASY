## 현업자 인터뷰

- Q1. NFT의 개인키를 우리가(DB 저장) 가지고 있어야하나요?
  - A. 키 스토어파일로 저장 가장 좋은건 메타마스크지갑으로 서명하게 하는게 제일이다.
  - EIP712 서명을 하면 DB에 저장한다.  일반적인 경우, 메타마스크가 알아서 처리
  - 유저의 개인키는 백앤드에 노출이 안되는 게 맞음
  - 일반적이면 서명하는 순간 바로 실행됨. 우리는 신경 안써도됨 → 메타마스크 코드를 잘 가져와서 써야함

---

- Q2. 거래 만들 때, 실제 금융거래를 하게되면 법률적인 문제가 발생할 수 있을텐데, 처리를 어떻게 해야하는지 궁금합니다.
  
  - A. 신경을 쓰다가 무산되는 경우가 많다. 보통은 모회사와 별개로 코인 발행용 자회사(해외 법인)이 따로 있음. 
  - 거래소 상장을 안하는 경우, 블록체인 기반 포인트 서비스라고 말돌리면 국가과제 같은 것도 통과 가능
  
  - 고객, 지갑의 개인키를 서비스에서 다루면 (중앙화) 일이 복잡해짐
    
    - 보통 개인키를 분할해서 양쪽이 가지고 있거나, 메타마스크를 이용
  - 서명 같은건 DB 사용하지 않고 메타마스크에게 일임

---

- Q3. NFT 제작 시, 보안체계를 어떤식으로 해야하는지 궁금합니다.
  
  - A. NFT 같은 경우는 컨트랙트 형식으로 발행된다. 
    대다수의 데이터는 백앤드나 데이터베이스로 넘겨서 속도나 부하를 해결한다.
    컨트랙트는 주요 로직만 작성
  - 오픈재플린의 핵심코드를 상속하여 사용하고, 오딧에서 검수
  - 관리자 권한은 멀티시그월렛으로 관리
  - 오딧을 쓸 때는 멀티시그월렛을 써라 → 개인키를 쪼개서 암호화를 하라는 것으로 보임

---

- Q4. NFT의 희소성을 일반적으로 어느정도에 측정해야하는지 궁금합니다. (무제한 발급하여 판매하기 VS 극소수의 NFT만 발급하여 희소성을 높이기)
  
  - A. 이 부분은 장단점이 있다. 
    - 이더락 NFT(100개 제한에 희소성 극악):  거래는 적지만 한번 거래할때마다 거래 대금이 크다.
    
    - 1~2만개 발행 : 커뮤니티 파워가 커진다. 홀더들 중 유명한 사람들이 있으면 커뮤니티가 활성화됨. 

---

- Q5. 블록체인의 구현과 NFT 발급 구현이 문법적으로 차이가 많은지 궁금합니다.
  
  - 블록체인 구현 방식은 여러 개.
  - 컨트렉트 형태로 NFT 형태와 똑같이 구현하는 것을 전제로 하면 둘의 다른 점은 크게 없다.
  - 구조체 형태 안에 데이터 장부
  - 오픈제플린에 ERC115 등을 상속시켜 사용
    - NFT 거래소에 규약이 필요해서 NFT 표준이 필요함

---

- Q6. 유저간 거래시 발생하는 가스비는 어떻게 처리하는게 일반적인지 궁금합니다.
  - A. NFT 거래소 한정, 유저 간 거래 할 때 오픈씨 or 룩스레어는 구매자&판매자의 데이터를 받아온다.
  - 결국 거래를 체결하는 마지막 사람이 최종 결제를 한다.
    - 거래가 일어나는 마지막 시점을 기준으로 가스비가 발생하도록(요즘 대다수가 이런 방식)
  - 다른 경우는 판매자가 nft를 등록할 때 한 번, 구매자가 구매할 때 한 번 결제가 진행
    - 최종 시점에 마지막에 거래한 놈이 가스비를 덤터기 쓰는 구조
  - 중간 컨트랙트가 nft를 들고 있다가 쏴주는 형식이 편할 것이다.

---

- 토큰 url를 보면 메타데이터가 들어가는 링크가 있다.
  이미지 링크나 제이슨 형태의 메타데이터를 어디다가 보관하는지는 자유
  아마존 클라우드, 깃허브 등 하고 싶은데에 넣어도 됨
  nft 파일 저장소는 원하는대로,
  실제 nft가 이동하면 소유주만 바뀜

---

- 검증하는 로직은 컨트랙트에 넣어두도록
  블록체인 p2p 데이터는 여러 종류가 있다.
  거래가 유효한지 검증, nft 등의 자산을 구매자에게 보내주는, 판매자는 구매 대금을 받고, 수수료는 서비스 운용 주체에게 보내는 내용은 컨트랙트가
  나머지는 백엔드가

---

- 이벤트에 빼놓은 걸 백엔드에 저장
  상태변화는 최소화
  거래 데이터 등 왠만한 건 이벤트
  블록이 업데이트 될때마다 데이터베이스 테이블 업데이트
  그걸 바탕으로 페이지에서 보여줘라
  자산 보내주는 부분 정도만 컨트랙트로

---

- 개인키 모두 데이터베이스에 저장하면 국내 규제에 걸린다.
  히스토어 파일을 저장
  메타마스크 같은 지갑을 써서 개인키 서명 등을 하도록
  백엔드는 조회용 데이터를 주로 다룬다.
  유저들의 개인키가 백엔드에 노출되는것은 최대한 막아라
  키스토어 파일로 만들어서 저장해라
  메타마스크 서명을 쓰는게 가장 효과적이다.
  실무에서는 규제 땜에 개인키 저장은 절대 안된다.

---


